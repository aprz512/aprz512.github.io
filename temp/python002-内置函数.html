<!DOCTYPE html>





<html class="theme-next mist use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="generator" content="Hexo 3.9.0">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">

<link rel="stylesheet" href="https://fonts.loli.net/css?family=EB Garamond:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">
  <link rel="stylesheet" href="/lib/fancybox/source/jquery.fancybox.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-bounce.min.css?v=1.0.2">
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.3.0',
    exturl: false,
    sidebar: {"position":"right","display":"post","offset":12,"onmobile":false},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    save_scroll: true,
    copycode: {"enable":true,"show_result":true,"style":"flat"},
    fancybox: true,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    }
  };
</script>

  <meta name="description" content="内置函数">
<meta property="og:type" content="website">
<meta property="og:title" content="python002-内置函数">
<meta property="og:url" content="http://aprz512.github.io/temp/python002-内置函数.html">
<meta property="og:site_name" content="二手程序员">
<meta property="og:description" content="内置函数">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2017-06-07T08:25:47.662Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="python002-内置函数">
<meta name="twitter:description" content="内置函数">
  <link rel="canonical" href="http://aprz512.github.io/temp/python002-内置函数">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: false,
    isPage: true,
    isArchive: false
  };
</script>
<link href="https://fonts.loli.net/css?family=EB+Garamond:400,400i,700,700i|Noto+Serif+SC:400,500,700&display=swap&subset=chinese-simplified" rel="stylesheet">

  <title>python002-内置函数 | 二手程序员</title>
  








  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  <div class="container sidebar-position-right">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">二手程序员</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">吹灭读书灯，一身都是月。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签<span class="badge">22</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类<span class="badge">12</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于我</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档<span class="badge">186</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a href="javascript:;" class="popup-trigger">
        
          <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
      </li>
    
  </ul>

    

    
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
    

  

</nav>
  <div class="site-search">
    
  <div class="popup search-popup">
  <div class="search-header">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <div class="search-input-wrapper">
      <input autocomplete="off" autocorrect="off" autocapitalize="none"
             placeholder="搜索..." spellcheck="false"
             type="text" id="search-input">
    </div>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>
  <div id="search-result"></div>
</div>


  </div>
</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content page-post-detail">
            

  <div id="posts" class="posts-expand">
    
    
    
    <div class="post-block page">
      <header class="post-header">

<h1 class="post-title" itemprop="name headline">python002-内置函数

</h1>

<div class="post-meta">
  

</div>

</header>

      
      
      
      <div class="post-body">
        
          <h3 id="内置函数"><a href="#内置函数" class="headerlink" title="内置函数"></a>内置函数</h3><a id="more"></a>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 绝对值</span></span><br><span class="line">abs(x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可迭代的对象所有元素都为真，则返回真</span></span><br><span class="line"><span class="comment"># 相当于：</span></span><br><span class="line"><span class="comment"># def all(iterable):</span></span><br><span class="line"><span class="comment">#    for element in iterable:</span></span><br><span class="line"><span class="comment">#        if not element:</span></span><br><span class="line"><span class="comment">#            return False</span></span><br><span class="line"><span class="comment">#    return True</span></span><br><span class="line"><span class="comment"># 0, "", None, [], (), &#123;&#125;, 都是False</span></span><br><span class="line">all(iterable)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 参见 all，只要有一个为真，则返回真</span></span><br><span class="line">any(iteraable)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这个函数跟repr()函数一样，返回一个可打印的对象字符串方式表示。</span></span><br><span class="line"><span class="comment"># 当遇到非ASCII码时，就会输出\x，\u或\U 等字符来表示。与Python 2版本里的repr()是等效的函数。</span></span><br><span class="line"><span class="comment"># 实际上调用了对象的 __repr__ 的成员函数</span></span><br><span class="line">ascill(object)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进制转换，其他进制转十进制使用 int 构造函数</span></span><br><span class="line">bin(x)</span><br><span class="line">oct(x)</span><br><span class="line">int(x)</span><br><span class="line">hex(x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将 x 转为 bool 对象（True or False）</span></span><br><span class="line">bool([x])</span><br><span class="line"></span><br><span class="line"><span class="comment"># bytes 是字节序列，对比 str 是 Unicode 序列</span></span><br><span class="line">bytes()</span><br><span class="line"></span><br><span class="line"><span class="comment"># bytearray与bytes的区别是，bytearray是可变的</span></span><br><span class="line">bytearray()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进行数字和字母（ASCII表）的转换</span></span><br><span class="line">chr()</span><br><span class="line">ord()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 利用这个可以搞随机验证码</span></span><br><span class="line">chr(random.randomrange(<span class="number">65</span>, <span class="number">91</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查对象object是否可调用。</span></span><br><span class="line"><span class="comment"># 如果返回True，object仍然可能调用失败；但如果返回False，调用对象ojbect绝对不会成功。</span></span><br><span class="line">callable(object)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 函数将一个字符串编译为字节代码，返回字节码</span></span><br><span class="line">complie()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个复数</span></span><br><span class="line">complex()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列出类方法</span></span><br><span class="line">dir()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回一个元组 --- (商， 余数)</span></span><br><span class="line">divmod(x, y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立索引</span></span><br><span class="line">enumerate()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将字符串str当成有效的表达式来求值并返回计算结果</span></span><br><span class="line"><span class="comment"># 注意要是表达式，比如for循环就不行</span></span><br><span class="line">eval()</span><br><span class="line"><span class="comment"># 示例代码</span></span><br><span class="line">eval(<span class="string">"3 + 4"</span>)</span><br><span class="line">eval(<span class="string">"a + b"</span>, &#123;<span class="string">"a"</span> : <span class="number">3</span>, <span class="string">"b"</span> : <span class="number">4</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行储存在字符串或文件中的Python语句</span></span><br><span class="line">exec()</span><br><span class="line"></span><br><span class="line"><span class="comment"># lambda表达式可用于此</span></span><br><span class="line"><span class="comment"># 过滤器，返回通过函数校验元素的集合</span></span><br><span class="line">filter()</span><br><span class="line"><span class="comment"># 映射，将每个元素执行函数变换</span></span><br><span class="line">map()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 不可变的set</span></span><br><span class="line">frozenset()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以字典形式返回模块的 全局 和 局部 变量</span></span><br><span class="line">globals()</span><br><span class="line">locals()</span><br><span class="line"></span><br><span class="line"><span class="comment"># hash 值</span></span><br><span class="line">hash()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断类类型</span></span><br><span class="line">isinstance()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个可迭代对象，需要使用next方法来访问下一个元素</span></span><br><span class="line">iter()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 长度</span></span><br><span class="line">len()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 最大最小值</span></span><br><span class="line">max()</span><br><span class="line">min()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指数</span></span><br><span class="line">pow()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成范围</span></span><br><span class="line">range()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 同 ascii()，但是不转义</span></span><br><span class="line">repr()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 四舍五入</span></span><br><span class="line">round()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 翻转</span></span><br><span class="line">reversed()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切片</span></span><br><span class="line">slice()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 排序</span></span><br><span class="line">sorted()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 求和</span></span><br><span class="line">sum()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对象变量个数</span></span><br><span class="line">vars()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自行google</span></span><br><span class="line">zip()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开文件</span></span><br><span class="line">open()</span><br></pre></td></tr></table></figure>

<h3 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h3><p>打开文件时，需要指定文件路径和以何等方式打开文件，打开后，即可获取该文件句柄，通过此文件句柄对该文件操作。</p>
<p>读写模式的类型有：</p>
<p>rU 或 Ua 以读方式打开, 同时提供通用换行符支持 (PEP 278)<br>w     以写方式打开，会删除原来的文件<br>a     以追加模式打开 (从 EOF 开始, 必要时创建新文件)<br>r+     以读写模式打开<br>w+     以读写模式打开 (参见 w )<br>a+     以读写模式打开 (参见 a )<br>rb     以二进制读模式打开<br>wb     以二进制写模式打开 (参见 w )<br>ab     以二进制追加模式打开 (参见 a )<br>rb+    以二进制读写模式打开 (参见 r+ )<br>wb+    以二进制读写模式打开 (参见 w+ )<br>ab+    以二进制读写模式打开 (参见 a+ )</p>
<p>文件指针：操作文件的时候，有个指针指向文件内容的某个位置，在我们进行读写操作的时候，指针都会移动。</p>
<p>在python3和python2中以下模式有不同的表现，以下结论基于python3，可能还不完整：</p>
<p>使用r+时，读操作正常，写操作有两种情况：写之前读过了，在末尾写，写之前没读过，在指针位置写。</p>
<p>使用w+的时候，先清空文件（文件存在），读写操作正常。</p>
<p>使用x+的时候，与w+一样，区别是，文件存在则报错。</p>
<p>使用a+的时候，打开文件会将指针定位到文件末尾，读操作正常，写操作一直在文件末尾。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 关闭文件</span></span><br><span class="line">cur_file.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 刷新文件缓冲区</span></span><br><span class="line">cur_file.flush()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取数据</span></span><br><span class="line">cur_file.read()</span><br><span class="line"><span class="comment"># 一个字符或一个字节</span></span><br><span class="line">cur_file.read(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读一行</span></span><br><span class="line">cur_file.readline()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 移动文件指针</span></span><br><span class="line">cur_file.seek(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指针位置</span></span><br><span class="line">cur_file.tell()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 截取指针之前的内容</span></span><br><span class="line">cur_file.truncate()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 也是一行一行的读</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> cur_file:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 会自动关闭文件，可以打开多个</span></span><br><span class="line"><span class="keyword">with</span> open(file_path, <span class="string">"r+"</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> file1, open(file_path2, <span class="string">"w+"</span>) <span class="keyword">as</span> file2:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>用户登录例子</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> getpass</span><br><span class="line"></span><br><span class="line">name = input(<span class="string">"name"</span>)</span><br><span class="line">psw = getpass.getpass(<span class="string">"password"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"user.db"</span>, <span class="string">"r+"</span>) <span class="keyword">as</span> user:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> user:</span><br><span class="line">        <span class="comment"># strip 可以传递参数，默认去除空格和换行符</span></span><br><span class="line">        line = line.strip()</span><br><span class="line">        info = line.split(<span class="string">"$"</span>)</span><br><span class="line">        <span class="keyword">if</span> name == info[<span class="number">0</span>] <span class="keyword">and</span> psw == info[<span class="number">1</span>]:</span><br><span class="line">            print(<span class="string">"login success"</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">"no match user"</span>)</span><br></pre></td></tr></table></figure>

<h3 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先看一个例子</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"f1"</span>)</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"new f1"</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 输出 new f1</span></span><br><span class="line"><span class="comment"># 这不会报错！</span></span><br><span class="line">f1()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 写一个简单的装饰器</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fuckboss</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dosomething</span><span class="params">()</span>:</span></span><br><span class="line">        print(<span class="string">"start"</span>)</span><br><span class="line">        f = func()</span><br><span class="line">        print(<span class="string">"end"</span>)</span><br><span class="line">        <span class="keyword">return</span> f</span><br><span class="line">    <span class="keyword">return</span> dosomething</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">meet_girl</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"nice girl"</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># ... 还有很多函数</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 当boss要我们统计所有函数的耗时时间的时候，直接修改是忒麻烦的</span></span><br><span class="line"><span class="comment"># 装饰器可以很简单的完成这个功能，如下：</span></span><br><span class="line"><span class="meta">@fuckboss</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">meet_girl</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"nice girl"</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 现在解释一下，装饰器到底做了什么</span></span><br><span class="line"><span class="comment"># 1. 解释器遇见 @fuckboss 的时候，会将 meet_girl 当做参数传递给 fuckboss</span></span><br><span class="line"><span class="comment"># 2. 将 fuckboss 的返回值赋值给 meet_girl，这样其实就是替换了 meet_girl 这个函数指针指向的函数</span></span><br><span class="line"><span class="comment"># 3. 执行 meet_girl 函数的时候，实际上是执行的 fuckboss 里面的 dosomething 函数 （所以要注意参数对应）</span></span><br><span class="line"><span class="comment"># 4. 这样就实现了在原来函数的基础上加上别的功能代码的需求</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 装饰带参数的</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_log</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">r_func</span><span class="params">(arg1, arg2)</span>:</span></span><br><span class="line">    	print(<span class="string">"log"</span>)</span><br><span class="line">    	real_func = fun(arg1, arg2)</span><br><span class="line">        <span class="keyword">return</span> real_func</span><br><span class="line">    <span class="keyword">return</span> r_func</span><br><span class="line"></span><br><span class="line"><span class="meta">@print_log</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment"># 装饰任意参数的</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">commem</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">all</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line">        <span class="comment"># dosomething</span></span><br><span class="line">        fun = func(*args, **kwargs)</span><br><span class="line">        <span class="comment"># dosomething</span></span><br><span class="line">        <span class="keyword">return</span> fun</span><br><span class="line">    <span class="keyword">return</span> all</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多个装饰器装饰同一个函数</span></span><br><span class="line"><span class="comment"># 其实自己想一下就理解了 加一个装饰器就相当于在原函数的基础上加了一些代码</span></span><br></pre></td></tr></table></figure>

<h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python的正则在 re 模块中实现</span></span><br><span class="line"><span class="comment"># 1. findAll</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回所有匹配的 放在一个list中</span></span><br><span class="line">re.findAll(<span class="string">"sb"</span>, <span class="string">"you are sbsb"</span>)</span><br></pre></td></tr></table></figure>

<p>元字符和语法：</p>


<p>几个查找的区别：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">match</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">这个方法将从string的pos下标处起尝试匹配pattern；如果pattern结束时仍可匹配，则返回一个Match对象；如果匹配过程中pattern无法匹配，或者匹配未结束就已到达endpos，则返回None。 </span></span><br><span class="line"><span class="string">pos和endpos的默认值分别为0和len(string)；re.match()无法指定这两个参数，参数flags用于编译pattern时指定匹配模式。 </span></span><br><span class="line"><span class="string">注意：这个方法并不是完全匹配。当pattern结束时若string还有剩余字符，仍然视为成功。想要完全匹配，可以在表达式末尾加上边界匹配符'$'。 </span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line">search</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">这个方法用于查找字符串中可以匹配成功的子串。从string的pos下标处起尝试匹配pattern，如果pattern结束时仍可匹配，则返回一个Match对象；若无法匹配，则将pos加1后重新尝试匹配；直到pos=endpos时仍无法匹配则返回None。 </span></span><br><span class="line"><span class="string">pos和endpos的默认值分别为0和len(string))；re.search()无法指定这两个参数，参数flags用于编译pattern时指定匹配模式。 </span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line">findall</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">搜索string，以列表形式返回全部能匹配的子串。 </span></span><br><span class="line"><span class="string">返回list</span></span><br><span class="line"><span class="string">有组的时候，返回组里面的内容，组前面加上 ?: 可以返回完整匹配内容</span></span><br><span class="line"><span class="string">要注意的是，匹配成功之后，接下来继续匹配会从上次匹配的子串的下一个字符开始，而不是直接从下一个字符开始。</span></span><br><span class="line"><span class="string">例如：</span></span><br><span class="line"><span class="string">regex = "\d\w\d"</span></span><br><span class="line"><span class="string">re.findall(regex, "w3e4r5t6")</span></span><br><span class="line"><span class="string">输出3e4 5t6</span></span><br><span class="line"><span class="string">没有4r5</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 常见方法的意思</span></span><br><span class="line"></span><br><span class="line">group()		<span class="comment"># 返回所有匹配的内容</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 为什么要使用分组</span></span><br><span class="line"><span class="comment"># 1, 可以重复利用</span></span><br><span class="line"><span class="comment"># 2, 可以取得匹配结果的某一部分</span></span><br><span class="line">groups()	<span class="comment"># 返回匹配的分组结果，没有分组则为 ()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 与groups() 差不多，只不过返回字典的形式  在分组里面使用 (?p&lt;k1&gt;)</span></span><br><span class="line">groupdict()</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">元组的嵌套：</span><br><span class="line">从左到右，从外到内，记住元组只是取内容</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">re.findall(<span class="string">"(\w)*"</span>, <span class="string">"123"</span>)</span><br><span class="line"><span class="comment"># 输出 [3, '']</span></span><br><span class="line">re.findall(<span class="string">"(\w)&#123;3&#125;"</span>, <span class="string">"123"</span>)</span><br><span class="line"><span class="comment"># 输出 ['3']</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重复使用元组的时候，如果有字符串匹配到 ()* ，则groups() 只返回最后一个匹配的字符串。</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">re.split(<span class="string">"a\w+"</span>, <span class="string">"ni hao aa d"</span>)</span><br><span class="line"><span class="comment"># 输出 ['ni h', ' ', ' d']</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用分组 可以拿到分割字符</span></span><br><span class="line"></span><br><span class="line">re.split(<span class="string">"（a\w+）"</span>, <span class="string">"ni hao aa d"</span>)</span><br><span class="line"><span class="comment"># 输出 ['ni h', 'ao', ' ', 'aa', ' d']</span></span><br></pre></td></tr></table></figure>

<p>举个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 做一个计算器</span></span><br><span class="line"><span class="comment"># 首先匹配 最内层的括号</span></span><br><span class="line"><span class="comment"># 意思是 '(' 开头 ')'结尾， 中间有多个非 '(' 和 ')' 的字符</span></span><br><span class="line">regex1 = <span class="string">r"\([^()]+\)"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 接来下匹配 * / ** 乘法，除法，幂</span></span><br><span class="line">regex2 = <span class="string">r"\d+\.?\d*([*/]|[\*\*])"</span></span><br></pre></td></tr></table></figure>

<h3 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h3><p>pickle</p>
<p>下面演示的都是 cPickle，原生 pickle 函数的参数也有点不一样，并且 python 3 和 python 2 的使用也有很大区别。</p>
<p>pickle 模块提供了以下函数对：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">dumps(object) 返回一个字符串，它包含一个 pickle 格式的对象；</span><br><span class="line"></span><br><span class="line">loads(string) 返回包含在 pickle 字符串中的对象； </span><br><span class="line"></span><br><span class="line">dump(object, file) 将对象写到文件，这个文件可以是实际的物理文件，但也可以是任何类似于文件的对象，这个对象具有 write() 方法，可以接受单个的字符串参数； </span><br><span class="line"></span><br><span class="line">load(file) 返回包含在 pickle 文件中的对象。</span><br><span class="line"></span><br><span class="line">缺省情况下， dumps() 和 dump() 使用可打印的 ASCII 表示来创建 pickle。两者都有一个 final 参数（可选），如果为 True ，则该参数指定用更快以及更小的二进制表示来创建 pickle。 loads() 和 load() 函数自动检测 pickle 是二进制格式还是文本格式。</span><br></pre></td></tr></table></figure>

<p>清单 1. dumps() 和 loads() 的演示**</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">Welcome To PyCrust 0.7.2 - The Flakiest Python Shell</span><br><span class="line">Sponsored by Orbtech - Your source for Python programming expertise.</span><br><span class="line">Python 2.2.1 (#1, Aug 27 2002, 10:22:32)</span><br><span class="line">[GCC 3.2 (Mandrake Linux 9.0 3.2-1mdk)] on linux-i386</span><br><span class="line">Type "copyright", "credits" or "license" for more information.</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; import cPickle as pickle</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; t1 = ('this is a string', 42, [1, 2, 3], None)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; t1</span><br><span class="line">('this is a string', 42, [1, 2, 3], None)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; p1 = pickle.dumps(t1)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; p1</span><br><span class="line">"(S'this is a string'\nI42\n(lp1\nI1\naI2\naI3\naNtp2\n."</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; print p1</span><br><span class="line">(S'this is a string'</span><br><span class="line">I42</span><br><span class="line">(lp1</span><br><span class="line">I1</span><br><span class="line">aI2</span><br><span class="line">aI3</span><br><span class="line">aNtp2</span><br><span class="line">.</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; t2 = pickle.loads(p1)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; t2</span><br><span class="line">('this is a string', 42, [1, 2, 3], None)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; p2 = pickle.dumps(t1, True)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; p2</span><br><span class="line">'(U\x10this is a stringK*]q\x01(K\x01K\x02K\x03eNtq\x02.'</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; t3 = pickle.loads(p2)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; t3</span><br><span class="line">('this is a string', 42, [1, 2, 3], None)</span><br></pre></td></tr></table></figure>

<p>注：该文本 pickle 格式很简单，这里就不解释了。事实上，在 pickle 模块中记录了所有使用的约定。我们还应该指出，在我们的示例中使用的都是简单对象，因此使用二进制 pickle 格式不会在节省空间上显示出太大的效率。然而，在实际使用复杂对象的系统中，您会看到，使用二进制格式可以在大小和速度方面带来显著的改进。</p>
<p>接下来，我们看一些示例，这些示例用到了 dump() 和 load() ，它们使用文件和类似文件的对象。这些函数的操作非常类似于我们刚才所看到的 dumps() 和 loads() ，区别在于它们还有另一种能力 — dump() 函数能一个接着一个地将几个对象转储到同一个文件。随后调用 load() 来以同样的顺序检索这些对象。清单 2 显示了这种能力的实际应用：</p>
<p><strong>清单 2. dump() 和 load() 示例</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span>&gt;&gt; a1 = 'apple'</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; b1 = &#123;1: 'One', 2: 'Two', 3: 'Three'&#125;</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; c1 = ['fee', 'fie', 'foe', 'fum']</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; f1 = file('temp.pkl', 'wb')</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; pickle.dump(a1, f1, True)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; pickle.dump(b1, f1, True)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; pickle.dump(c1, f1, True)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; f1.close()</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; f2 = file('temp.pkl', 'rb')</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; a2 = pickle.load(f2)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; a2</span><br><span class="line">'apple'</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; b2 = pickle.load(f2)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; b2</span><br><span class="line">&#123;1: 'One', 2: 'Two', 3: 'Three'&#125;</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; c2 = pickle.load(f2)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; c2</span><br><span class="line">['fee', 'fie', 'foe', 'fum']</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; f2.close()</span><br></pre></td></tr></table></figure>

<p><strong>Pickle 的威力</strong></p>
<p>到目前为止，我们讲述了关于 pickle 方面的基本知识。在这一节，将讨论一些高级问题，当您开始 pickle 复杂对象时，会遇到这些问题，其中包括定制类的实例。幸运的是，Python 可以很容易地处理这种情形。</p>
<p>可移植性</p>
<p>从 空间和时间上说，Pickle 是可移植的。换句话说，pickle 文件格式独立于机器的体系结构，这意味着，例如，可以在 Linux 下创建一个 pickle，然后将它发送到在 Windows 或 Mac OS 下运行的 Python 程序。并且，当升级到更新版本的 Python 时，不必担心可能要废弃已有的 pickle。Python 开发人员已经保证 pickle 格式将可以向后兼容 Python 各个版本。事实上，在 pickle 模块中提供了有关目前以及所支持的格式方面的详细信息：</p>
<p><strong>清单 3. 检索所支持的格式</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span>&gt;&gt; pickle.format_version</span><br><span class="line">'1.3'</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; pickle.compatible_formats</span><br><span class="line">['1.0', '1.1', '1.2']</span><br></pre></td></tr></table></figure>

<p>多个引用，同一对象</p>
<p>在 Python 中，变量是对象的引用。同时，也可以用多个变量引用同一个对象。经证明，Python 在用经过 pickle 的对象维护这种行为方面丝毫没有困难，如清单 4 所示：</p>
<p><strong>清单 4. 对象引用的维护</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span>&gt;&gt; a = [1, 2, 3]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; b = a</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; a</span><br><span class="line">[1, 2, 3]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; b</span><br><span class="line">[1, 2, 3]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; a.append(4)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; a</span><br><span class="line">[1, 2, 3, 4]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; b</span><br><span class="line">[1, 2, 3, 4]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; c = pickle.dumps((a, b))</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; d, e = pickle.loads(c)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; d</span><br><span class="line">[1, 2, 3, 4]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; e</span><br><span class="line">[1, 2, 3, 4]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; d.append(5)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; d</span><br><span class="line">[1, 2, 3, 4, 5]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; e</span><br><span class="line">[1, 2, 3, 4, 5]</span><br></pre></td></tr></table></figure>

<p><strong>循环引用和递归引用</strong></p>
<p>可以将刚才演示过的对象引用支持扩展到 循环引用（两个对象各自包含对对方的引用）和 递归引用（一个对象包含对其自身的引用）。下面两个清单着重显示这种能力。我们先看一下递归引用：</p>
<p><strong>清单 5. 递归引用</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span>&gt;&gt; l = [1, 2, 3]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; l.append(l)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; l</span><br><span class="line">[1, 2, 3, [...]]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; l[3]</span><br><span class="line">[1, 2, 3, [...]]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; l[3][3]</span><br><span class="line">[1, 2, 3, [...]]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; p = pickle.dumps(l)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; l2 = pickle.loads(p)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; l2</span><br><span class="line">[1, 2, 3, [...]]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; l2[3]</span><br><span class="line">[1, 2, 3, [...]]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; l2[3][3]</span><br><span class="line">[1, 2, 3, [...]]</span><br></pre></td></tr></table></figure>

<p>现在，看一个循环引用的示例：</p>
<p><strong>清单 6. 循环引用</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span>&gt;&gt; a = [1, 2]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; b = [3, 4]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; a.append(b)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; a</span><br><span class="line">[1, 2, [3, 4]]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; b.append(a)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; a</span><br><span class="line">[1, 2, [3, 4, [...]]]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; b</span><br><span class="line">[3, 4, [1, 2, [...]]]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; a[2]</span><br><span class="line">[3, 4, [1, 2, [...]]]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; b[2]</span><br><span class="line">[1, 2, [3, 4, [...]]]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; a[2] is b</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; b[2] is a</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; f = file('temp.pkl', 'w')</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; pickle.dump((a, b), f)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; f.close()</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; f = file('temp.pkl', 'r')</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; c, d = pickle.load(f)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; f.close()</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; c</span><br><span class="line">[1, 2, [3, 4, [...]]]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; d</span><br><span class="line">[3, 4, [1, 2, [...]]]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; c[2]</span><br><span class="line">[3, 4, [1, 2, [...]]]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; d[2]</span><br><span class="line">[1, 2, [3, 4, [...]]]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; c[2] is d</span><br><span class="line">True</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; d[2] is c</span><br><span class="line">True</span><br></pre></td></tr></table></figure>

<p>注意，如果分别 pickle 每个对象，而不是在一个元组中一起 pickle 所有对象，会得到略微不同（但很重要）的结果，如清单 7 所示：</p>
<p><strong>清单 7. 分别 pickle vs. 在一个元组中一起 pickle</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span>&gt;&gt; f = file('temp.pkl', 'w')</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; pickle.dump(a, f)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; pickle.dump(b, f)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; f.close()</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; f = file('temp.pkl', 'r')</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; c = pickle.load(f)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; d = pickle.load(f)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; f.close()</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; c</span><br><span class="line">[1, 2, [3, 4, [...]]]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; d</span><br><span class="line">[3, 4, [1, 2, [...]]]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; c[2]</span><br><span class="line">[3, 4, [1, 2, [...]]]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; d[2]</span><br><span class="line">[1, 2, [3, 4, [...]]]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; c[2] is d</span><br><span class="line">False</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; d[2] is c</span><br><span class="line">False</span><br></pre></td></tr></table></figure>

<p>相等，但并不总是相同</p>
<p>正如在上一个示例所暗示的，只有在这些对象引用内存中同一个对象时，它们才是相同的。在 pickle 情形中，每个对象被恢复到一个与原来对象相等的对象，但不是同一个对象。换句话说，每个 pickle 都是原来对象的一个副本：</p>
<p><strong>清单 8. 作为原来对象副本的被恢复的对象</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span>&gt;&gt; j = [1, 2, 3]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; k = j</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; k is j</span><br><span class="line">Ture</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; x = pickle.dumps(k)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; y = pickle.loads(x)</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; y</span><br><span class="line">[1, 2, 3]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; y == k</span><br><span class="line">True</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; y is k</span><br><span class="line">False</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; y is j</span><br><span class="line">False</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; k is j</span><br><span class="line">True</span><br></pre></td></tr></table></figure>

<p>JSON模块</p>
<p>和 pickle 用法差不多，只不过能够序列化的东西很少（数字， 字符串，列表，元组，字典等）。但是好处在于通用。Json是大多数语言支持的。</p>
<p><a href="http://www.cnblogs.com/loleina/p/5623968.html" target="_blank" rel="noopener">http://www.cnblogs.com/loleina/p/5623968.html</a></p>
<p>hashlib模块</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接加密</span></span><br><span class="line">hash = hashlib.md5()</span><br><span class="line">hash.update(<span class="string">"1234"</span>)</span><br><span class="line">print(hash.hexdigest())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加密算法中添加自定义key再来做加密</span></span><br><span class="line">hash = hashlib.md5(<span class="string">'898oaFs09f'</span>)</span><br><span class="line">hash.update(<span class="string">'admin'</span>)</span><br><span class="line"><span class="keyword">print</span> hash.hexdigest()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 效果同上</span></span><br><span class="line"><span class="keyword">import</span> hmac</span><br><span class="line">h = hmac.new(<span class="string">'wueiqi'</span>)</span><br><span class="line">h.update(<span class="string">'hellowo'</span>)</span><br><span class="line"><span class="keyword">print</span> h.hexdigest()</span><br></pre></td></tr></table></figure>


        
      </div>
      
      
      
    </div>
    

    
    
    
  </div>


          </div>
          
    
    <div class="comments" id="comments"></div>
  

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">

          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="https://github.com/aprz512/pic4aprz512/blob/master/Blog/avatar/avatar.jpeg?raw=true"
      alt="aprz512">
  <p class="site-author-name" itemprop="name">aprz512</p>
  <div class="site-description motion-element" itemprop="description">博客建于2017年02月05日21:39:56</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">186</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/aprz512" title="GitHub &rarr; https://github.com/aprz512" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
  </div>
  <div class="cc-license motion-element" itemprop="license">
    
  
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>




        </div>
      </div>
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#内置函数"><span class="nav-number">1.</span> <span class="nav-text">内置函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件操作"><span class="nav-number">2.</span> <span class="nav-text">文件操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#装饰器"><span class="nav-number">3.</span> <span class="nav-text">装饰器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#正则表达式"><span class="nav-number">4.</span> <span class="nav-text">正则表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#模块"><span class="nav-number">5.</span> <span class="nav-text">模块</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">true</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    
    <span title="站点总字数">759k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    
    <span title="站点阅读时长">11:30</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  
    <span class="post-meta-divider">|</span>
  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>








        
      </div>
    </footer>
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
      </div>
      <div class="reading-progress-bar"></div>

    

  </div>

  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/fancybox/source/jquery.fancybox.pack.js"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

<script src="/js/utils.js?v=7.3.0"></script><script src="/js/motion.js?v=7.3.0"></script>

<script src="/js/schemes/muse.js?v=7.3.0"></script>



<script src="/js/next-boot.js?v=7.3.0"></script>




  















  <script src="/js/local-search.js?v=7.3.0"></script>














  

  

  

  


  
    <script src="/js/scrollspy.js?v=7.3.0"></script><script src="/js/post-details.js?v=7.3.0"></script>

  


<script>
NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(item => {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: false,
    appId: 'g48OrtSq4q4MWp6EAEWbkAsT-gzGzoHsz',
    appKey: 'CXW8M63QPXbQ9qKMgHDy9Be2',
    placeholder: '说点什么吧',
    avatar: 'mm',
    meta: guest,
    pageSize: '10' || 10,
    visitor: false,
    lang: 'zh-cn' || 'zh-cn',
    path: location.pathname
  });
}, window.Valine);
</script>

</body>
</html>
